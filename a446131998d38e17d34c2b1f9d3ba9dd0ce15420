{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "445f4ca1_1ae26fa8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-06-05T05:31:34Z",
      "side": 1,
      "message": "Verified with\n```\n$ bazel test --cache_test_results\u003dNO plugins/owners-common/... plugins/owners/... plugins/owners-autoassign/...\n...\n//plugins/owners:owners_tests                                            PASSED in 133.7s\n//plugins/owners-autoassign:owners_autoassign_tests                      PASSED in 48.7s\n//plugins/owners-common:test                                             PASSED in 1.9s\n```",
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7a99934_edd47bee",
        "filename": "owners/src/main/java/com/googlesource/gerrit/owners/OwnersStoredValues.java",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-06-08T06:09:46Z",
      "side": 1,
      "message": "Unrelated here, but I\u0027m getting warning in Eclipse that this type specification is redundant.",
      "range": {
        "startLine": 54,
        "startChar": 24,
        "endLine": 54,
        "endChar": 34
      },
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eacae754_891c636f",
        "filename": "owners/src/test/java/com/googlesource/gerrit/owners/OwnersSubmitRequirementIT.java",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-06-05T06:06:41Z",
      "side": 1,
      "message": "Would it be possible to add a test to demonstrate that OWNERS file hierarchy doesn\u0027t inherit from All-Parents project as predecessor of this change?\n\nI tried to apply this test only to the stable-3.5 without the rest of this change, but then the test is failing:\n\n```\n1) shouldRequireApprovalFromGrandParentProjectOwner(com.googlesource.gerrit.owners.OwnersApprovalHasOperandIT)\nmissing (1): LegacySubmitRequirementInfo{status\u003dNOT_READY, fallbackText\u003dOwners, type\u003downers}\n---\nexpected   : [LegacySubmitRequirementInfo{status\u003dNOT_READY, fallbackText\u003dOwners, type\u003downers}]\nbut was    : []\n\tat com.googlesource.gerrit.owners.OwnersSubmitRequirementIT.shouldRequireApprovalFromGrandParentProjectOwner(OwnersSubmitRequirementIT.java:387)\n2) shouldRequireApprovalFromGrandParentProjectOwner(com.googlesource.gerrit.owners.OwnersSubmitRequirementIT)\nmissing (1): LegacySubmitRequirementInfo{status\u003dNOT_READY, fallbackText\u003dOwners, type\u003downers}\n---\nexpected   : [LegacySubmitRequirementInfo{status\u003dNOT_READY, fallbackText\u003dOwners, type\u003downers}]\nbut was    : []\n\tat com.googlesource.gerrit.owners.OwnersSubmitRequirementIT.shouldRequireApprovalFromGrandParentProjectOwner(OwnersSubmitRequirementIT.java:387)\n\nFAILURES!!!\nTests run: 58,  Failures: 2\n```\n\nAnother question is: why this test is executed twice?",
      "range": {
        "startLine": 367,
        "startChar": 2,
        "endLine": 399,
        "endChar": 3
      },
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d0f4b0e_7ec77787",
        "filename": "owners/src/test/java/com/googlesource/gerrit/owners/OwnersSubmitRequirementIT.java",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2023-06-05T06:26:59Z",
      "side": 1,
      "message": "\u003e Another question is: why this test is executed twice?\n\nI think this is because `OwnersApprovalHasOperandI` is derived from `OwnersSubmitRequirementIT` as described in the commit message in change 365711. But is this actually justified, that all tests are executed twice? Can we do something similar to `pull-replication` and extract abstract class, see change 375954?\n\nUnrelated to this change, but I am seeing timeout in test execution on my old laptop, so that I tried to split the tests into own Bazel rule per test:\n\n```\n-junit_tests(\n-    name \u003d \"owners_tests\",\n-    srcs \u003d glob([\"src/test/java/**/*.java\"]),\n-    tags \u003d [\"owners\"],\n-    deps \u003d [\"owners__plugin_test_deps\"],\n-)\n+[junit_tests(\n+    name \u003d f[:f.index(\".\")].replace(\"/\", \"_\"),\n+    srcs \u003d [f],\n+    tags \u003d [\"owner\"],\n+    deps \u003d PLUGIN_TEST_DEPS + PLUGIN_DEPS + [\n+        \":owners__plugin_test_deps\",\n+    ],\n+) for f in glob([\"src/test/java/**/*.java\"])]\n```\n\nAnd it doesn\u0027t work, for the same reasons as in `pull-replication` plugin, see change 374814.",
      "parentUuid": "eacae754_891c636f",
      "range": {
        "startLine": 367,
        "startChar": 2,
        "endLine": 399,
        "endChar": 3
      },
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9e35add_6e18410d",
        "filename": "owners/src/test/java/com/googlesource/gerrit/owners/OwnersSubmitRequirementIT.java",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-06-05T08:35:16Z",
      "side": 1,
      "message": "That is correct. The second time is performed when submit requirement feature is configured for project in question (it requires an extra project configuration).\n\nI can take the separation of ITs as a follow-up to this change üëç",
      "parentUuid": "8d0f4b0e_7ec77787",
      "range": {
        "startLine": 367,
        "startChar": 2,
        "endLine": 399,
        "endChar": 3
      },
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "582a2cc7_cc10022c",
        "filename": "owners/src/test/java/com/googlesource/gerrit/owners/OwnersSubmitRequirementIT.java",
        "patchSetId": 1
      },
      "lineNbr": 399,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-06-06T05:45:53Z",
      "side": 1,
      "message": "Addressed the comments in the follow-up change.",
      "parentUuid": "d9e35add_6e18410d",
      "range": {
        "startLine": 367,
        "startChar": 2,
        "endLine": 399,
        "endChar": 3
      },
      "revId": "a446131998d38e17d34c2b1f9d3ba9dd0ce15420",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}